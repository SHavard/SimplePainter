import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;

import javax.swing.JPanel;

public class PaintPanel extends JPanel{

	public final static Color BG = Color.BLACK;
	
	private ArrayList<Segment> segments;

	public PaintPanel() {
		this.setBackground(Color.BLACK);
		Brush b = new Brush();
		this.addMouseListener(b);
		this.addMouseMotionListener(b);
		segments = new ArrayList<Segment>();
	}

	private void reset() {
		segments = new ArrayList<Segment>();
		repaint();
	}

	public void paintComponent(Graphics g) {
		super.paintComponent(g);
		if (segments.size() < 1)
			g.clearRect(0, 0, this.getWidth(), this.getHeight());
		for (Segment s : segments) {
			s.show(g);
		}
	}


	private class Brush extends MouseAdapter {

		public void mouseDragged(MouseEvent e) {
			if (e.getButton() == MouseEvent.BUTTON1) {
				//get most recent segment
				Segment s = segments.get(segments.size() -1);
				//add mouse position to segment
				s.addPoint(new Point(e.getX(), e.getY()));
				repaint();
			}
		}

		public void mousePressed(MouseEvent e) {
			switch (e.getButton()) {
			case MouseEvent.BUTTON1:
				//create new segment and add current mouse position to segment
				Segment s = new Segment(new Point(e.getX(), e.getY()));
				break;
			case MouseEvent.BUTTON3:
				//clear background
				reset();
				break;
			default: 
				//do nothing
				break;
			}
			repaint();
		}

	}


}
